<meta name='viewport' content='width=device-width, initial-scale=1'/><!doctype html>

<html lang="mr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>शब्द ओळख गेम -- पहिला वर्ग (10 शब्द)</title>
  <style>
    body{font-family: system-ui, -apple-system, 'Noto Sans Devanagari', sans-serif; padding:18px; background:#f7f9fc; color:#1f2937}
    .card{max-width:760px;margin:18px auto;background:white;border-radius:12px;box-shadow:0 6px 18px rgba(31,41,55,0.08);padding:20px}
    h1{font-size:1.5rem;margin:0 0 8px}
    p.lead{margin:0 0 18px;color:#374151}
    .controls{display:flex;gap:8px;flex-wrap:wrap;margin-bottom:16px}
    button{padding:10px 14px;border-radius:10px;border:0;background:#2563eb;color:white;font-weight:600;cursor:pointer}
    button.secondary{background:#f3f4f6;color:#111827}
    .options{display:grid;grid-template-columns:repeat(2,1fr);gap:10px;margin-top:12px}
    .opt{padding:14px;border-radius:10px;border:2px solid #e5e7eb;background:#fff;cursor:pointer;font-size:1.2rem; text-align:center}
    .status{margin-top:14px;font-weight:700}
    .score{float:right;font-weight:700}
    .hidden{display:none}
    .footer{margin-top:18px;font-size:0.9rem;color:#6b7280}
    .kbd{background:#111827;color:white;padding:6px 8px;border-radius:6px;font-size:0.85rem}
  </style>
</head>
<body>
  <div class="card">
    <h1>शब्द ओळख -- पहिला वर्ग</h1>
    <div style="display:flex;align-items:center;justify-content:space-between">
      <p class="lead">आवाज ऐका आणि योग्य शब्द निवडा. एकूण 10 प्रश्न.</p>
      <div class="score">स्कोअर: <span id="score">0</span>/10</div>
    </div><div class="controls">
  <button id="playBtn">आवाज वजा (Play)</button>
  <button id="repeatBtn" class="secondary">पुन्हा ऐका</button>
  <button id="nextBtn" class="secondary hidden">पुढचे</button>
  <button id="restartBtn" class="secondary">पुनः सुरुवात</button>
</div>

<div id="questionArea">
  <div style="font-size:1.05rem;color:#374151">खालील पर्यायांपैकी एक निवडा:</div>
  <div class="options" id="options"></div>
  <div class="status" id="status"></div>
</div>

<div class="footer">
  टिप: या वेबपेजवर टेक्स्ट-टू-स्पीच ब्राउझरद्वारे चालवते. मराठी आवाज उपलब्ध नसेल तर ब्राउझर/ओएस मधील हिंदी (hi-IN) किंवा इंग्रजी वापरेल. चांगले अनुभवासाठी Chrome/Edge वापरा.
  <div style="margin-top:6px">फाईल जतन करण्यासाठी: या पृष्ठाचे समस्त कोड कॉपी करून .html फाईल म्हणून सेव्ह करा आणि ब्राउझरमध्ये उघडा.</div>
</div>

  </div><script>
// शब्दांचा संच (10 शब्द) -- सरळ, पहिल्या वर्गासाठी
const lessons = [
  {word:'आम', choices:['आम','घर','पक्षी']},
  {word:'घर', choices:['पाय','घर','झाड']},
  {word:'पाणी', choices:['मावशी','पाणी','दुकान']},
  {word:'फळ', choices:['फळ','पुस्तक','कविता']},
  {word:'मित्र', choices:['सोपं','मित्र','सूर्य']},
  {word:'बाळ', choices:['बाळ','रिंगण','घोडा']},
  {word:'शाळा', choices:['पंखा','शाळा','नदी']},
  {word:'शेफळी', choices:['शेफळी','किताब','आकाश']},
  {word:'बंदर', choices:['वडील','बंदर','गोंद']},
  {word:'पुस्तक', choices:['दुध','पुस्तक','गाडी']}
];

let order = shuffle(Array.from({length:lessons.length},(_,i)=>i));
let idx = 0;
let score = 0;
let answered = false;

const playBtn = document.getElementById('playBtn');
const repeatBtn = document.getElementById('repeatBtn');
const nextBtn = document.getElementById('nextBtn');
const restartBtn = document.getElementById('restartBtn');
const optionsDiv = document.getElementById('options');
const statusDiv = document.getElementById('status');
const scoreSpan = document.getElementById('score');

function shuffle(arr){
  for(let i=arr.length-1;i>0;i--){
    const j=Math.floor(Math.random()*(i+1)); [arr[i],arr[j]]=[arr[j],arr[i]];
  }
  return arr;
}

function speak(text){
  const synth = window.speechSynthesis;
  if(!synth){
    alert('तुमच्या ब्राउझरमध्ये SpeechSynthesis उपलब्ध नाही. Chrome किंवा Edge वापरून पहा.');
    return;
  }
  synth.cancel();
  const utter = new SpeechSynthesisUtterance(text);
  // मागे mr-IN वापरून प्रयत्न, नसेल तर hi-IN
  utter.lang = 'mr-IN';
  // fallback voice selection: try to pick a Marathi or Hindi voice if available
  const voices = synth.getVoices();
  if(voices && voices.length){
    let v = voices.find(v=>v.lang && v.lang.startsWith('mr')) || voices.find(v=>v.lang && v.lang.startsWith('hi')) || voices[0];
    if(v) utter.voice = v;
  }
  // slower rate for clearer pronunciation for kids
  utter.rate = 0.9;
  synth.speak(utter);
}

function playTone(type){
  // success or fail beep using WebAudio
  try{
    const ctx = new (window.AudioContext || window.webkitAudioContext)();
    const o = ctx.createOscillator();
    const g = ctx.createGain();
    o.connect(g); g.connect(ctx.destination);
    o.type = 'sine';
    o.frequency.value = (type==='success')?880:220;
    g.gain.value = 0.0001;
    const now = ctx.currentTime;
    g.gain.setValueAtTime(0.0001, now);
    g.gain.exponentialRampToValueAtTime(0.2, now + 0.02);
    o.start(now);
    g.gain.exponentialRampToValueAtTime(0.0001, now + 0.5);
    o.stop(now + 0.55);
  }catch(e){/* some browsers require user gesture; ignore */}
}

function renderQuestion(){
  answered = false;
  statusDiv.textContent = '';
  nextBtn.classList.add('hidden');
  const q = lessons[order[idx]];
  // shuffle choices
  const ch = shuffle(q.choices.slice());
  optionsDiv.innerHTML = '';
  ch.forEach(c=>{
    const b = document.createElement('div');
    b.className='opt';
    b.textContent = c;
    b.addEventListener('click', ()=> selectOption(b, q.word));
    optionsDiv.appendChild(b);
  });
  // auto play the word once when question renders
  setTimeout(()=> speak(q.word), 300);
}

function selectOption(elem, correct){
  if(answered) return;
  answered = true;
  const chosen = elem.textContent;
  if(chosen === correct){
    elem.style.borderColor = '#10b981';
    statusDiv.textContent = 'बरोबर!';
    playTone('success');
    score++;
    scoreSpan.textContent = score;
  } else {
    elem.style.borderColor = '#ef4444';
    statusDiv.textContent = 'चुकीचे -- योग्य उत्तर: ' + correct;
    playTone('fail');
    // highlight correct option
    Array.from(document.querySelectorAll('.opt')).forEach(o=>{
      if(o.textContent === correct){ o.style.borderColor='#10b981'; }
    });
  }
  if(idx < order.length - 1){
    nextBtn.classList.remove('hidden');
  } else {
    // end of quiz
    statusDiv.textContent += ' -- खेळ पूर्ण. पुनः सुरुवात बटण दाबा.';
  }
}

playBtn.addEventListener('click', ()=>{
  const q = lessons[order[idx]];
  speak(q.word);
});

repeatBtn.addEventListener('click', ()=>{
  const q = lessons[order[idx]];
  speak(q.word);
});

nextBtn.addEventListener('click', ()=>{
  if(idx < order.length -1){ idx++; renderQuestion(); }
});

restartBtn.addEventListener('click', ()=>{
  order = shuffle(Array.from({length:lessons.length},(_,i)=>i));
  idx = 0; score = 0; scoreSpan.textContent = score;
  renderQuestion();
});

// initialize
renderQuestion();

</script></body>
</html>